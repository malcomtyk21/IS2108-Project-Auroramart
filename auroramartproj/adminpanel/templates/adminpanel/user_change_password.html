{% extends 'adminpanel/base_admin.html' %}

{% block title %}Change Password - AuroraMart Admin{% endblock %}

{% block navbar %}
{% include 'adminpanel/navbar.html' %}
{% endblock %}

{% block main_content %}
<div class="container">
	<div class="breadcrumb">
		<a href="{% url 'profile' %}" class="back-btn">Profile</a> &rsaquo; Change Password
	</div>

	<div class="header" style="padding:10px 0;">
		<div class="header-left">
			<h1>Change Password</h1>
		</div>
	</div>

	<form method="post">
		{% csrf_token %}

		{# Preserve origin so view can redirect appropriately #}
		<input type="hidden" name="from" value="{{ request.GET.from }}">

		{# Non-field errors (e.g., old password incorrect) #}
		{% if form.non_field_errors %}
		<div class="form">
			<div class="errorlist" style="color:#b91c1c;">
				{% for err in form.non_field_errors %}
				<div>{{ err }}</div>
				{% endfor %}
			</div>
		</div>
		{% endif %}

		<div class="form">
			<label for="{{ form.old_password.id_for_label }}">Current password</label>
			{{ form.old_password }}
			{% if form.old_password.errors %}
			<div class="errorlist" style="color:#b91c1c;">
				{% for err in form.old_password.errors %}
				<div>{{ err }}</div>
				{% endfor %}
			</div>
			{% endif %}
		</div>

		<div class="form">
			<label for="{{ form.new_password1.id_for_label }}">New password</label>
			{{ form.new_password1 }}
			{% if form.new_password1.help_text %}
			<div class="helptext" style="font-size: 13px; color:#374151; padding-top:6px;">
				{{ form.new_password1.help_text|safe }}
			</div>
			{% endif %}
			{% if form.new_password1.errors %}
			<div class="errorlist" style="color:#b91c1c;">
				{% for err in form.new_password1.errors %}
				<div>{{ err }}</div>
				{% endfor %}
			</div>
			{% endif %}
		</div>

		<div class="form">
			<label for="{{ form.new_password2.id_for_label }}">Confirm new password</label>
			{{ form.new_password2 }}
			{% if form.new_password2.errors %}
			<div class="errorlist" style="color:#b91c1c;">
				{% for err in form.new_password2.errors %}
				<div>{{ err }}</div>
				{% endfor %}
			</div>
			{% endif %}
		</div>

		<button type="submit" class="btn-add" style="margin-top:12px;">Save New Password</button>
	</form>
</div>
{% endblock %}

